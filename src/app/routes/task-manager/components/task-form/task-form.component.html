<div class="h-full p-4">
  <form [formGroup]="form">
    <div class="flex item-center justify-between">
      <mat-form-field>
        <mat-select formControlName="type">
          @for (status of statusTypes; track status) {
            <mat-option [value]="status.name">{{ status.name }}</mat-option>
          }
        </mat-select>
      </mat-form-field>

      <button mat-icon-button (click)="delete()">
        <mat-icon>delete</mat-icon>
      </button>
    </div>
    <div class="flex w-full flex-wrap pb-16">
      <div class="sm:w-full md:w-7/12 lg:w-4/6 pr-10">
        <mat-form-field appearance="outline">
          <input
            matInput
            formControlName="title"
            placeholder="Enter title"
            class="border rounded-lg text-sm w-full"
          />
        </mat-form-field>
        <div class="pt-4 pb-2 text-15 font-medium">Description</div>
        <mat-form-field class="example-full-width">
          <textarea
            matInput
            formControlName="description"
            placeholder="Add a description..."
          ></textarea>
        </mat-form-field>
        <div class="pt-4 pb-2 text-15 font-medium">Comments</div>
        <!-- <app-task-comments
          [comments]="taskData.comments"
          (onEmit)="onCommentEmit($event)"
        ></app-task-comments> -->
      </div>

      <div>
        <mat-form-field>
          <mat-label>Priority</mat-label>
          <mat-select formControlName="priority">
            @for (priority of priorityTypes; track priority) {
              <mat-option [value]="priority.name">{{
                priority.name
              }}</mat-option>
            }
          </mat-select>
        </mat-form-field>
        <mat-form-field>
          <mat-label>Assignees</mat-label>
          <mat-select formControlName="assignedTo">
            @for (user of users$ | async; track user) {
              <mat-option [value]="user.id">{{ user.username }}</mat-option>
            }
          </mat-select>
        </mat-form-field>

        <mat-form-field>
          <mat-label>End date</mat-label>
          <input matInput [matDatepicker]="picker" type="text" autocomplete="off" formControlName="dueDate">
          <mat-datepicker-toggle matIconSuffix [for]="picker"></mat-datepicker-toggle>
          <mat-datepicker #picker></mat-datepicker>
        </mat-form-field>

        <div
          class="mt-3 pt-3 leading-loose border-t border-borderLightest text-textMedium text-13"
        >
        </div>
      </div>
    </div>
    <div class="flex justify-between">
      <button
        mat-button
        (click)="closeDialog()"
        [disabled]="form.invalid"
        class="bg-gray-dark py-2 px-4 rounded"
      >
        Cancel
      </button>
      <button
        mat-button
        (click)="onSubmit()"
        [disabled]="form.invalid"
        class="bg-primary py-2 px-4 rounded"
      >
        Submit
      </button>
    </div>
  </form>
</div>
